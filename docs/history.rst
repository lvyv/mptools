.. include:: ../HISTORY.rst

2021.12.22
当前配置的主要问题和解决的方案。
配置下发的时候，一种是针对单视频通道的配置下发，一种是针对所有视频通道的全配置文件下发。两种情况都需要支持热更新整个程序，按照新的配置工作。
1）针对单通道的配置下发。
已解决。
2）针对多通道配置的下发。
已解决。
3）遗留问题。
配置信息的热更新。

热更新的方案：
a.不重启进程，而是改rtsp进程的那些控制参数。
b.统计一下rtsp，ai，mqtt都会用哪些控制参数呢：
ai-不需要配置，所有信息是rtsp发来的。
mqtt-需要，涉及到服务器重新连接等操作，破坏了原基类假定的startup，loop，shutdown三步，需要在基类进行改造。
rtsp-需要。
此前的方案是在创建进程的时候给pipeline分配任务参数，比如url，mqtt的连接地址等。这样在重新启动的时候就比较难处理，
最理想的方式是启动的流水线应该为无任务绑定的。当任务来了以后，流水线自己取领取任务。也就是在创建任务的时候，只是启动了若干流水线，
在startup的时候，大家取获取任务。如果任务分配完，就算了。

当前通道配置aoi的时候，会临时取得摄像头的控制权，这会打断识别流水线，之后再释放控制权。
并且要支持多任务之间的互斥。
2021.12.23
1）在rest的presets的路由调用时，进行处理，先通知主进程暂停，然后开始，最后再恢复。
